유니티 URP 매뉴얼: https://docs.unity3d.com/kr/2023.2/Manual/universal-render-pipeline.html

# Built in RP

우선 URP를 설명하기 전에 유니티 기존의 랜더링 파이프 라인에 대해서 간단히 알아보고 가시죠.
 
유니티의 기존 랜더링 파이프라인은 Built in RP인데 이 RP에는 한계점이 있습니다

랜더 파이프라인 영역을 수정할 수 없다는 큰 단점이 있었습니다.

그래서 각 분야에 맞게 최적화 작업이 불가능하다는 문제가 발생하였습니다.

# SRP(Scriptable Render Pipeline)

그래서 등장한게 SRP입니다.

c#으로 랜더 파이프라인을 직접 짜는것인데

이거 또한 문제가 되는게 시간, 돈, 인력과 같은 문제가 나온겁니다.

# URP

유니버설 렌더 파이프라인(URP)은 SRP를 템플릿으로 제공한 것입니다.

초기에는 LWRP로 불렸다가 URP로 이름이 변경되었습니다.

LWRP가 있다면 HWRP도 있겠죠??

HWRP는 고해상도 랜더 파이프라인입니다.

URP : 모바일, PC

HWRP : 고사양 PC, 콘솔

이렇게 사용한다고 보면될거같습니다.

# URP의 장점

- 특정 상황에서 비약적인 성능향상(다수의 실시간 광원)
- 셰이더 그래프 기능 추가
- 지속적인 업데이트(Built in은 더이상 업데이트지 원하지않습니다)
- 최신기능 탑재
- 공식 튜토리얼이 많습니다.

# 성능 향상이 가능 한 부분

- 다수의 실시간 광원 (Multi light single pass : 다수의 광원을 한번의 드로우 콜로만 필요)
- SRP Batcher
  - 기존의 배칭은 머테리얼 단위이지만 SRP배처는 셰이더 단위로 그립니다.
  - 단 셰이더가 SRP Batcher를 지원해야합니다.
- 포스트 프로세싱 기능 향상
- 업스케일 샘플링
  - 3D씬을 랜더 텍스처에 저해상도로 랜더링하고 랜더텍스처를 화면의 해상도에 맞게 늘려서 출력하고
  - UI같은것은 기존의 해상도의 맞게 출력해서 눈속임?을 하는 방법이다. 
  - 사용방법은 URP인스펙터에서 Quality탭의 Render Scale을 조절해주면된다
  - 호율은 보통 랜더스케일을 0.8정도 설정하는게 제일 좋다고 하는데 이때의 효율은 픽셀수가 약 35프로 정도 감소되는 효과가 있다.(기존 연산량의 64% 수준)

# 모바일에서의 URP

앞에 말했던 SRP Batcher가 URP의 핵심중 하나인데

이게 플랫폼마다 지원하는 버전이 다 다릅니다.

안드로이드(OpenGl ES 3.1버전 이상 / Unity 2019.2 이상)

애플 (메탈 / Unity 2018.3이상)

윈도우 (DirectX11 이상 / Unity2018.2 이상)

다른 플랫폼은 상관없지만 주의해야할게 바로 안드로이드 입니다.

OpenGl ES 3.1버전 이상은 안드로이드 5.0(api level21)부터 지원되기 때문에 

구식기기를 포기해야 할 수도 있습니다.

# 그렇다면 어떻게 해야하나

구글에서 조사한 내용이 있는데

![3](https://github.com/yoodonghoon/Memory/assets/145320150/2ab01dfb-4a92-462e-a4bc-c0c4151cff62)

활성화된 폰중 3.2버전이 75프로 그중 캐주얼 게임을 받은 유저가 90프로 라는겁니다.

그 밑 하위버전은 거의 설치하지 않았구요.

그래서 차라리 OpenGl ES 3.2버전으로 바꿔버리는게 좋습니다.

# 왜 3.1버전이 아니고 3.2버전으로 바꾸는게 좋은가요

바로 ASTC기능이 3.2버전부터 적용되기 때문입니다.

ASTC(Adaptive Scalable Texture Compression)는 유니티에서 저장과 렌더링의 텍스처를 최적화하기 위해 사용되는 텍스처 압축 포맷입니다. 

ASTC는 고품질의 결과를 제공하고 효율적인 메모리 사용을 보장하는 유연하고 다기능한 압축 알고리즘입니다.
 
유니티는 Android와 iOS 플랫폼 모두에서 ASTC 압축을 지원합니다. 

이 압축 포맷은 다양한 플랫폼에서 텍스처의 성능을 향상시킬 수 있습니다.

또한 NPOT 텍스처(2의 거듭제곱이 아닌 텍스처)도 처리 가능합니다.